---
import Grain from "./Grain.astro";

---
<script>
    const surveyFormAnimals = document.getElementById("survey_form-animals");
    const animalsShowAnswersContainer = document.getElementById(
        "animalsShowAnswersContainer"
    );
    let surveyFormAnimalsResult;
    // const animalsSurvey = addEventListener('click', function =>{})

    surveyFormAnimals.addEventListener("submit", function (event) {
        surveyFormAnimalsResult = JSON.stringify(
            document.querySelector('input[name="animals"]:checked').value
        );
        localStorage.setItem(
            "surveyFormAnimalsResult",
            surveyFormAnimalsResult
        );
        animalsShowAnswersContainer.textContent = `2:${JSON.stringify(
            surveyFormAnimalsResult
        )}`;
    });

    const resultContainerAnimals = document.getElementById(
        "animalsShowAnswersContainer"
    );
    const surveySubmitButton = document.getElementById("surveySubmitButton");
    const storedResultsAnimals = localStorage.getItem(
        "surveyFormAnimalsResult"
    );
    const resultsAnimals = JSON.stringify("storedResultsAnimals");
    resultContainerAnimals.textContent = `✓${storedResultsAnimals.replace(
        /"/g,
        ""
    )}`;

    setTimeout(function hideResultContainerAnimals() {
        // resultContainerAnimals.classList.toggle('hide');
        surveySubmitButton.classList.toggle("hide");
    }, 0);
    setTimeout(function hideResultContainerAnimals() {
        resultContainerAnimals.classList.toggle("hide");
        surveySubmitButton.classList.toggle("hide");
    }, 3000);
</script>

<style>
    .survey_title-main {
        font-size: 1.8rem;
        text-align: center;
        margin: auto;
        border-bottom: 3px solid #3488a8;
        width: 600px;
        margin-bottom: 30px;
        padding-bottom: 5px;
    }
    .survey_title-animals {
        margin: 0;
    }
    .survey_wrap-flex {
        display: flex;
        justify-content: space-between;
        column-gap: 5px;
    }
    .survey_wrap-animal {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        width: 21%;
        justify-content: space-between;
        background-color: rgb(251, 221, 157);
        padding: 20px 20px 10px 20px;
        border: 3px solid #c9f0ff;
        border-bottom: none;
    }
    .survey_wrap-animal.cat {
        width: 25%;
    }

    .survey_image.dragon {
         width: 80%;
        margin: 0 auto;
    }
    .survey_image.cat {
        width: 65%;
        margin: 0 auto;
    }
    .survey_image.horse {
         width: 80%;
        margin: 0 auto;
    }
    .survey_image.bird {
         width: 80%;
        margin: 0 auto;
    }

    .survey_animals-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px;
        border: 3px solid #c9f0ff;
    }
    .survey_question {
        color: white;
        border-bottom: 3px solid #c9f0ff;
        padding-bottom: 5px;
    }
    .survey_labelText {
        display: inline;
        color: white;
        /* background-color: rgb(251, 221, 157); */
        background: linear-gradient(
            to right,
            rgb(119, 43, 134) 30%,
            transparent
        );
        padding: 5px;
        border-radius: 0 10px 10px 0;
    }
    .survey_button {
        display: block;
        color: white;
        font-size: 1rem;
        font-weight: bolder;
        padding: 10px 15px;
        margin: 20px auto 10px auto;
        border-top: 0px solid #c9f0ff;
        border-left: 0px solid #c9f0ff;
        border-right: 0px solid black;
        border-bottom: 0px solid black;
        background-color: rgb(119, 43, 134);
    }
    .survey_next-page{
        position: absolute;
        display: block;
        z-index: 1;
        width: 180px;
        color: white;
        font-size: 1rem;
        font-weight: bolder;
        font-family: sans-serif;
        text-decoration: none;
        text-align: center;
        padding: 12px 8px;
        bottom: 0px;
        left: 390px;
        border-top: 2px solid #c9f0ff;
        border-left: 2px solid #c9f0ff;
        border-right: 2px solid #c9f0ff;
        border-bottom: 0px solid black;
        background-color: #3488a8;
        /* border-radius: 30px; */
    }
    .survey_next-page:hover {
        cursor: pointer;
        background-color: #a8d4e6;
        border-top: 0px solid black;
        border-left: 0px solid black;
        border-right: 0px solid black;
        border-bottom: 0px solid #c9f0ff;
        
    }
    .survey_button:hover {
        cursor: pointer;
        background-color: rgb(107, 36, 121);
        border-top: 0px solid black;
        border-left: 0px solid black;
        border-right: 0px solid #c9f0ff;
        border-bottom: 0px solid #c9f0ff;
        
    }
    #animalsShowAnswersContainer {
        background-color: greenyellow;
        text-align: center;
        margin: 20px auto;
        width: 180px;
        padding: 10px;
    }
    .hide  {
        display: none;
    }
    .survey_container-bird{margin-bottom: -30px;}
</style>

<section>
    <h2 class="survey_title-main">У нас любят заводить зверушек для души</h2>

    <div class="survey_wrap-flex">
        <div class="survey_wrap-animal">
            <div>
                <h3 class="survey_title-animals">Дракончики</h3>
                <p class="survey_text">
                    Они сууупер быстрые, большшые и красивые. Любят
                    путешествовать и перемещаться, домчат вас хоть на край света
                </p>
            </div>
            <img class="survey_image dragon" src="dragon.svg" alt="дракон" />
        </div>
        <div class="survey_wrap-animal cat">
            <div>
                <h3 class="survey_title-animals">Котик-фамильяр</h3>
                <p class="survey_text">
                    Умные, самодостаточные. Иногда придут под бочек просить
                    ласки и слушать про ваш тяжелый день. Иногда будут гулять
                    сами по себе, неделями не появляясь дома.
                </p>
            </div>
            <img class="survey_image cat" src="cat.svg" alt="кошечка" />
        </div>

        <div class="survey_wrap-animal">
            <div>
                <h3 class="survey_title-animals">Лошадь</h3>
                <p class="survey_text">
                    Обычные лошади. На них можно кататься :) и за ними нужно
                    ухаживать. Занимают много места.
                </p>
            </div>
            <img class="survey_image horse" src="horse.svg" alt="лошадь" />
        </div>
        <div class="survey_wrap-animal">
            <div>
                <h3 class="survey_title-animals">Птичка-фамильяр</h3>
                <p class="survey_text">
                    Глупенькие, но такие милые. Любят поболтать, с радостью
                    составят вам в этом компанию. Можно отправлять по мелким
                    поручениям.
                </p>
            </div>
            <img class="survey_image bird" src="birdThick.svg" alt="птичка" />
        </div>
    </div>

    <form id="survey_form-animals">
        <div class="survey_animals-container container">
            <label for="animalsRadio"
                ><h2 class="survey_question">А кого выбрал бы ты?</h2></label
            >
            <div>
                <div class="wrapRadio">
                    <input
                        type="radio"
                        id="animalsDragon"
                        name="animals"
                        value="Дракончик"
                        required
                    />
                    <p class="survey_labelText">Дракончика</p>
                    <input
                        type="radio"
                        id="animalsCat"
                        name="animals"
                        value="Котик-фамильяр"
                    />
                    <p class="survey_labelText">Котика-фамильяра</p>
                    <input
                        type="radio"
                        id="animalsHorse"
                        name="animals"
                        value="Лошадь"
                        required
                    />
                    <p class="survey_labelText">Лошадь</p>
                    <input
                        type="radio"
                        id="animalsBird"
                        name="animals"
                        value="Птичка-фамильяр"
                    />
                    <p class="survey_labelText">Птичку-фамильяра</p>
                </div>
                <button
                    id="surveySubmitButton"
                    class="survey_button"
                    type="submit"
                    class="submit">Тык для сохранения</button
                >
                <p id="animalsShowAnswersContainer"></p>
                <a class="survey_next-page" id="surveyButtonNextPage" href="./resultsPage">Следующая страница</a>
            </div>
              <div class="survey_container-bird"><Grain /></div> 
        </div>
     
    </form>
</section>
